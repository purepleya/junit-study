## 2.2 Definitions
### Lifecycle Method
@BeforeAll, @AfterAll, @BeforeEach, @AfterEach

### Test Class
Test class ëŠ” abstract ì—¬ì„œëŠ” ì•ˆë˜ë©°, ë‹¨ í•˜ë‚˜ì˜ ìƒì„±ì(constructor)ë¥¼ ê°€ì ¸ì•¼ í•œë‹¤.
1. ìµœìƒìœ„ class
2. static member class 
3. @Nested ë¡œ ì •ì˜ë˜ê³  í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œë¥¼ í•˜ë‚˜ì´ìƒ ê°€ì§€ê³  ìˆëŠ” class


## 2.3 Test Classes and Methods
test í•¨ìˆ˜ì™€ lifecycle í•¨ìˆ˜ëŠ” í˜„ì¬ class ë‚´ë¶€ì— ì„ ì–¸ë˜ê±°ë‚˜, ë¶€ëª¨ í´ë˜ìŠ¤ë‚˜ interface ë¡œ ë¶€í„° ìƒì† ë°›ëŠ”ë‹¤.
ë§ ë¶™ì—¬, í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ì™€ ë¼ì´í”„ ì‚¬ì´í´ í•¨ìˆ˜ëŠ” ì¶”ìƒ í•¨ìˆ˜ë¡œ ì„ ì–¸ ë  ìˆ˜ ì—†ìœ¼ë©´ return value ë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤. 

---
Class ì™€ methodì˜ ê°€ì‹œì„±
test class, test í•¨ìˆ˜, lifecycle í•¨ìˆ˜ëŠ” public ì¼ í•„ìš”ëŠ” ì—†ìœ¼ë‚˜ privateë¡œ ì„ ì–¸ë˜ì„œëŠ” ì•ˆëœë‹¤.<br/>
ì¼ë°˜ì ìœ¼ë¡œ, ë‹¤ë¥¸ packageì—ì„œ test classë‚˜ test í•¨ìˆ˜, lifecycle í•¨ìˆ˜ ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ ì œì™¸í•˜ê³  public ìˆ˜ì •ìë¥¼ ìƒëµí•˜ëŠ”ê²ƒì„ ì¶”ì²œí•œë‹¤.
---
ì¼ë°˜ì ì¸ test í•¨ìˆ˜ì™€ lifecycle í•¨ìˆ˜ì˜ ì‚¬ìš© ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.
```java
import static org.junit.jupiter.api.Assertions.fail;
import static org.junit.jupiter.api.Assumptions.assumeTrue;

import org.junit.jupiter.api.AfterAll;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Disabled;
import org.junit.jupiter.api.Test;

class StandardTests {
    @BeforeAll
    static void initAll() {
    }

    @BeforeEach
    void init() {
    }

    @Test
    void succeedingTest() {
    }

    @Test
    void failingTest() {
        fail("a failing test");
    }

    @Test
    @Disabled("for demonstration purposes")
    void skippedTest() {
        // not executed
    }

    @Test
    void abortedTest() {
        assumeTrue("abc".contains("Z"));
        fail("test should have been aborted");
    }

    @AfterEach
    void tearDown() {
    }

    @AfterAll
    static void tearDownAll() {
    }
}
```


## 2.4 Display Names
test class ì™€ test í•¨ìˆ˜ëŠ” @DisplayName ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ í‘œì‹œë˜ëŠ” í…ŒìŠ¤íŠ¸ ëª…(display name)ì„ ë³€ê²½ í•  ìˆ˜ ìˆë‹¤. í‘œì‹œ í•  ìˆ˜ ìˆëŠ” í…ŒìŠ¤íŠ¸ ëª…ì€ ê³µë°±, íŠ¹ìˆ˜ë¬¸ì, ì´ëª¨ì§€ ê¹Œì§€ ê°€ëŠ¥í•˜ê³ , ë³€ê²½í•œ í…ŒìŠ¤íŠ¸ ëª…ì€ í…ŒìŠ¤íŠ¸ ë³´ê³ ì„œë‚˜, í…ŒìŠ¤íŠ¸ ì‹¤í–‰ê¸°, IDE ì—ì„œ í‘œì‹œ ëœë‹¤.

```java
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
~~~~
@DisplayName("A special test case")
class DisplayNameDemo {

    @Test
    @DisplayName("Custom test name containing spaces")
    void testWithDisplayNameContainingSpaces() {
    }

    @Test
    @DisplayName("â•¯Â°â–¡Â°ï¼‰â•¯")
    void testWithDisplayNameContainingSpecialCharacters() {
    }

    @Test
    @DisplayName("ğŸ˜±")
    void testWithDisplayNameContainingEmoji() {
    }

}
```

### 2.4.1. Display Name Generators
JUnit JupiterëŠ” @DisplayNameGeneration ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ëŠ” custom display name ìƒì„±ê¸°ë¥¼ ì§€ì›í•œë‹¤.  
@DisplayNameì˜ ê°’ì´ @DisplayNameGenerationë¥¼ í†µí•´ ìƒì„±ëœ ê°’ ë³´ë‹¤ í•­ìƒ ìš°ì„ í•œë‹¤.

DisplayNameGeneratorë¥¼ êµ¬í˜„í•¨ ìœ¼ë¡œì„œ ìƒì„±ê¸°ë¥¼ ë§Œ ë“¤ ìˆ˜ ìˆë‹¤.  
ì•„ë˜ëŠ” Jupiterì—ì„œ ê¸°ë³¸ì„ ì œê³µí•˜ëŠ” ìƒì„±ê¸° ë“¤ì´ë‹¤.

|DisplayNameGenerator| Behavior                                                 |
|---|----------------------------------------------------------|
|Standard| Junit Jupiter 5.0ì´ ì¶œì‹œ ëœ ì´í›„ ì‚¬ìš©ë˜ì–´ì˜¤ê³  ìˆëŠ” ê¸°ë³¸ display name ìƒì„±ê¸° |
|Simple| íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” í•¨ìˆ˜ì˜ ê´„í˜¸ë¥¼ ì‚­ì œ í•˜ëŠ” ìƒì„±ê¸°                               |
|ReplaceUnderscores| ë°‘ì¤„(underscore)ì„ ê³µë°±(space)ë¡œ ë³€í™˜í•˜ëŠ” ìƒì„±ê¸°                      |
|IndicativeSentences| testì™€ ì´ë¥¼ í¬í•¨í•˜ëŠ” class ëª…ì„ í•©ì³ì„œ ì™„ì„±ëœ ë¬¸ì¥ì„ ìƒì„±í•˜ëŠ” ìƒì„±ê¸°              |

@IndicativeSentencesGeneration ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ë©´, IndicativeSentences ê¸°ëŠ¥ì— separator(ê¸°ë³¸ì€ ", ")ì™€ ê¸°ë³¸ display name ìƒì„±ê¸°ë¥¼ ë³„ë„ë¡œ ì •ì˜ í•  ìˆ˜ ìˆë‹¤.
```java
class DisplayNameGeneratorDemo {

    @Nested
    @DisplayNameGeneration(DisplayNameGenerator.ReplaceUnderscores.class)
    class A_year_is_not_supported {

        @Test
        void if_it_is_zero() {}
//        if it is zero

        @DisplayName("A negative value for year is not supported by the leap year computation.")
        @ParameterizedTest(name = "For example, year {0} is not supported.")
        @ValueSource(ints = { -1, -4 })
        void if_it_is_negative(int year) {}
//        A negative value for year is not supported by the leap year computation.
//            For example, year -1 is not supported.
//            For example, year -4 is not supported.
    }

    @Nested
    @IndicativeSentencesGeneration(separator = " -> ", generator = ReplaceUnderscores.class)
    class A_year_is_a_leap_year {

        @Test
        void if_it_is_divisible_by_4_but_not_by_100() {
        }
//        A year is a leap year -> if it is divisible by 4 but not by 100

        @ParameterizedTest(name = "Year {0} is a leap year.")
        @ValueSource(ints = { 2016, 2020, 2048 })
        void if_it_is_one_of_the_following_years(int year) {
        }
//        A year is a leap year -> if it is one of the following years
//            Year 2016 is a leap year
//            Year 2020 is a leap year
//            Year 2048 is a leap year        
    }

}
```

### 2.4.2. Setting the Default Display Name Generator
junit ì†ì„± íŒŒì¼ (src/test/resources/junit-platform.properties) ì— "junit.jupiter.displayname.generator.default"ê°’ì„ ì´ìš©í•˜ì—¬ ê¸°ë³¸ display name ìƒì„±ê¸°ë¥¼ ì„¤ì • í•  ìˆ˜ ìˆë‹¤.  
@DisplayNameGeneration ì–´ë…¸í…Œì´ì…˜ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì„¤ì • ê°’ ë³´ë‹¤ @DisplayName ì–´ë…¸í…Œì´ì…˜ì˜ ê°’ì´ ë” ìš°ì„ í•˜ë©°, ì‚¬ìš©ìê°€ DisplayNameGeneratorë¥¼ êµ¬í˜„í•˜ì—¬ ìƒì„±í•œ ì‚¬ìš©ì ì •ì˜ display name ìƒì„±ê¸° í´ë˜ìŠ¤ë„ ì ìš© ê°€ëŠ¥í•˜ë‹¤.  
```properties
junit.jupiter.displayname.generator.default = org.junit.jupiter.api.DisplayNameGenerator$ReplaceUnderscores
```

## 2.5. Assertions
JUnit Jupiter comes with many of the assertion methods that JUnit 4 has and adds a few that lend themselves well to being used with Java 8 lambdas. All JUnit Jupiter assertions are static methods in the org.junit.jupiter.api.Assertions class.
```java
import static java.time.Duration.ofMillis;
import static java.time.Duration.ofMinutes;
import static org.junit.jupiter.api.Assertions.assertAll;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.junit.jupiter.api.Assertions.assertTimeout;
import static org.junit.jupiter.api.Assertions.assertTimeoutPreemptively;
import static org.junit.jupiter.api.Assertions.assertTrue;

import java.util.concurrent.CountDownLatch;

import example.domain.Person;
import example.util.Calculator;

import org.junit.jupiter.api.Tag;
import org.junit.jupiter.api.Test;

class AssertionsDemo {

    private final Calculator calculator = new Calculator();

    private final Person person = new Person("Jane", "Doe");

    @Test
    void standardAssertions() {
        assertEquals(2, calculator.add(1, 1));
        assertEquals(4, calculator.multiply(2, 2),
                "The optional failure message is now the last parameter");
        assertTrue('a' < 'b', () -> "Assertion messages can be lazily evaluated -- "
                + "to avoid constructing complex messages unnecessarily.");
    }

    @Test
    void groupedAssertions() {
        // In a grouped assertion all assertions are executed, and all
        // failures will be reported together.
        assertAll("person",
            () -> assertEquals("Jane", person.getFirstName()),
            () -> assertEquals("Doe", person.getLastName())
        );
    }

    @Test
    void dependentAssertions() {
        // Within a code block, if an assertion fails the
        // subsequent code in the same block will be skipped.
        assertAll("properties",
            () -> {
                String firstName = person.getFirstName();
                assertNotNull(firstName);

                // Executed only if the previous assertion is valid.
                assertAll("first name",
                    () -> assertTrue(firstName.startsWith("J")),
                    () -> assertTrue(firstName.endsWith("e"))
                );
            },
            () -> {
                // Grouped assertion, so processed independently
                // of results of first name assertions.
                String lastName = person.getLastName();
                assertNotNull(lastName);

                // Executed only if the previous assertion is valid.
                assertAll("last name",
                    () -> assertTrue(lastName.startsWith("D")),
                    () -> assertTrue(lastName.endsWith("e"))
                );
            }
        );
    }

    @Test
    void exceptionTesting() {
        Exception exception = assertThrows(ArithmeticException.class, () ->
            calculator.divide(1, 0));
        assertEquals("/ by zero", exception.getMessage());
    }

    @Test
    void timeoutNotExceeded() {
        // The following assertion succeeds.
        assertTimeout(ofMinutes(2), () -> {
            // Perform task that takes less than 2 minutes.
        });
    }

    @Test
    void timeoutNotExceededWithResult() {
        // The following assertion succeeds, and returns the supplied object.
        String actualResult = assertTimeout(ofMinutes(2), () -> {
            return "a result";
        });
        assertEquals("a result", actualResult);
    }

    @Test
    void timeoutNotExceededWithMethod() {
        // The following assertion invokes a method reference and returns an object.
        String actualGreeting = assertTimeout(ofMinutes(2), AssertionsDemo::greeting);
        assertEquals("Hello, World!", actualGreeting);
    }

    @Test
    void timeoutExceeded() {
        // The following assertion fails with an error message similar to:
        // execution exceeded timeout of 10 ms by 91 ms
        assertTimeout(ofMillis(10), () -> {
            // Simulate task that takes more than 10 ms.
            Thread.sleep(100);
        });
    }

    @Test
    void timeoutExceededWithPreemptiveTermination() {
        // The following assertion fails with an error message similar to:
        // execution timed out after 10 ms
        assertTimeoutPreemptively(ofMillis(10), () -> {
            // Simulate task that takes more than 10 ms.
            new CountDownLatch(1).await();
        });
    }

    private static String greeting() {
        return "Hello, World!";
    }

}
```

---
Preemptive Timeouts with assertTimeoutPreemptively()
The various assertTimeoutPreemptively() methods in the Assertions class execute the provided executable or supplier in a different thread than that of the calling code. This behavior can lead to undesirable side effects if the code that is executed within the executable or supplier relies on java.lang.ThreadLocal storage.

One common example of this is the transactional testing support in the Spring Framework. Specifically, Springâ€™s testing support binds transaction state to the current thread (via a ThreadLocal) before a test method is invoked. Consequently, if an executable or supplier provided to assertTimeoutPreemptively() invokes Spring-managed components that participate in transactions, any actions taken by those components will not be rolled back with the test-managed transaction. On the contrary, such actions will be committed to the persistent store (e.g., relational database) even though the test-managed transaction is rolled back.

Similar side effects may be encountered with other frameworks that rely on ThreadLocal storage.

---

### 2.5.1. Kotlin Assertion Support
JUnit Jupiter also comes with a few assertion methods that lend themselves well to being used in Kotlin. All JUnit Jupiter Kotlin assertions are top-level functions in the org.junit.jupiter.api package.
```kotlin
import example.domain.Person
import example.util.Calculator
import org.junit.jupiter.api.Assertions.assertEquals
import org.junit.jupiter.api.Assertions.assertTrue
import org.junit.jupiter.api.Tag
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.assertAll
import org.junit.jupiter.api.assertDoesNotThrow
import org.junit.jupiter.api.assertThrows
import org.junit.jupiter.api.assertTimeout
import org.junit.jupiter.api.assertTimeoutPreemptively
import java.time.Duration

class KotlinAssertionsDemo {

    private val person = Person("Jane", "Doe")
    private val people = setOf(person, Person("John", "Doe"))

    @Test
    fun `exception absence testing`() {
        val calculator = Calculator()
        val result = assertDoesNotThrow("Should not throw an exception") {
            calculator.divide(0, 1)
        }
        assertEquals(0, result)
    }

    @Test
    fun `expected exception testing`() {
        val calculator = Calculator()
        val exception = assertThrows<ArithmeticException> ("Should throw an exception") {
            calculator.divide(1, 0)
        }
        assertEquals("/ by zero", exception.message)
    }

    @Test
    fun `grouped assertions`() {
        assertAll(
            "Person properties",
            { assertEquals("Jane", person.firstName) },
            { assertEquals("Doe", person.lastName) }
        )
    }

    @Test
    fun `grouped assertions from a stream`() {
        assertAll(
            "People with first name starting with J",
            people
                .stream()
                .map {
                    // This mapping returns Stream<() -> Unit>
                    { assertTrue(it.firstName.startsWith("J")) }
                }
        )
    }

    @Test
    fun `grouped assertions from a collection`() {
        assertAll(
            "People with last name of Doe",
            people.map { { assertEquals("Doe", it.lastName) } }
        )
    }

    @Test
    fun `timeout not exceeded testing`() {
        val fibonacciCalculator = FibonacciCalculator()
        val result = assertTimeout(Duration.ofMillis(1000)) {
            fibonacciCalculator.fib(14)
        }
        assertEquals(377, result)
    }

    @Test
    fun `timeout exceeded with preemptive termination`() {
        // The following assertion fails with an error message similar to:
        // execution timed out after 10 ms
        assertTimeoutPreemptively(Duration.ofMillis(10)) {
            // Simulate task that takes more than 10 ms.
            Thread.sleep(100)
        }
    }
}
```

### 2.5.2. Third-party Assertion Libraries
Even though the assertion facilities provided by JUnit Jupiter are sufficient for many testing scenarios, there are times when more power and additional functionality such as matchers are desired or required. In such cases, the JUnit team recommends the use of third-party assertion libraries such as AssertJ, Hamcrest, Truth, etc. Developers are therefore free to use the assertion library of their choice.

For example, the combination of matchers and a fluent API can be used to make assertions more descriptive and readable. However, JUnit Jupiterâ€™s org.junit.jupiter.api.Assertions class does not provide an assertThat() method like the one found in JUnit 4â€™s org.junit.Assert class which accepts a Hamcrest Matcher. Instead, developers are encouraged to use the built-in support for matchers provided by third-party assertion libraries.

The following example demonstrates how to use the assertThat() support from Hamcrest in a JUnit Jupiter test. As long as the Hamcrest library has been added to the classpath, you can statically import methods such as assertThat(), is(), and equalTo() and then use them in tests like in the assertWithHamcrestMatcher() method below.

```java
import static org.hamcrest.CoreMatchers.equalTo;
import static org.hamcrest.CoreMatchers.is;
import static org.hamcrest.MatcherAssert.assertThat;

import example.util.Calculator;

import org.junit.jupiter.api.Test;

class HamcrestAssertionsDemo {

    private final Calculator calculator = new Calculator();

    @Test
    void assertWithHamcrestMatcher() {
        assertThat(calculator.subtract(4, 1), is(equalTo(3)));
    }

}
```
Naturally, legacy tests based on the JUnit 4 programming model can continue using org.junit.Assert#assertThat.

